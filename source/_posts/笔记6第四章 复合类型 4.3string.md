---
title: 第四章 复合类型 4.3string，4.4结构，4.5共用体
date: 2025-12-10 17:00:00
tags: [C++笔记]
categories: [C++笔记]
cover: 
description: 阿稳第十三期视频笔记，4.3，4.4，4.5
---
# C++ primer plus 笔记


## 第四章 复合类型-string类简介
要使用string类，必须在程序中包含头文件string。
```cpp
#include<iostream>
#include<string>
int main()
{
	using namespace std;
	char charr1[20];
	char charr2[20] = "jiajia";
	string str1;
	string str2 = "panther";
	cout<<"enter another kond of feline: ";
	cin>>charr1;
	cout<< "enter another kond of feline: ";
	cin>>str1;
	cout<<"here are some feline:\n";
	cout<<charr1<<" "<<charr2<<" "<<str1<<" "<<str2<<endl;
	cout<<"the third letter in "<<charr2<<" is "<<charr2[2]<<endl;
	cout<<"the third letter in "<<str2<<" is "<<str2[2]<<endl;
	return 0;
}
```
从上面的示例可以看出string和字符数组相同。
- 都可以c风格初始化；
- 可与使用cin储存到string；
- 可以使用cout显示；
- 可以使用数组表示来访问储存在string对象中。
### 4.3.2 赋值、拼接和附加
> string比数组简单，例如，不能将一个数组赋给另一个数组，但可以将一个string赋给另一个string。
```cpp
char charr1[20];
char charr2[20]="jiajia";
string str1;
string str2="panther";
charr1=charr2;
str1=str2;
```
合并
```cpp
string str3;
str3 = str1 + str2;
str1 += str2;
```
演示程序：
```cpp
#include <iostream>
#include <string>
int main()
{
	using namespace std;
	string s1 = "pungin";
	string s2, s3;
	cout << "u can assign one string obiect to another:s2 = s1\n";
	s2=s1;
	cout << "s1 :" << s1 << ", s2:" << s2 << endl;
	cout <<"u can assign a c-type to a string object.\n";
	cout<<"s2=\"buzzard\"\n";
	s2 = "buzzard";
	cout <<"s2:"<<s2<<endl;
	cout <<"u can concatenate strings:s3=s1+s3\n";
	s3=s1+s2;
	cout<<"s3:"<<s3<<endl;
	cout<<"u can append strings\n";
	s1 += s2;
	cout <<"s1 += s2 yields s1="<<s1<<endl;
	s2+=" for a day ";
	cout <<"s2 += \"for a day\" yeilds s2=  "<<s2<<endl; 
	return 0;
}
```
输出以下：
```text
u can assign one string obiect to another:s2 = s1
s1 :pungin, s2:pungin
u can assign a c-type to a string object.
s2="buzzard"
s2:buzzard
u can concatenate strings:s3=s1+s3
s3:punginbuzzard
u can append strings
s1 += s2 yields s1=punginbuzzard
s2 += "for a day" yeilds s2=  buzzard for a day
```
### 4.3.3 string类的其他操作
新增string类之前要完成字符串赋值，可用C语言库里的函数，头文件cstring提供这些函数，例如，可以使用strcpy（）将字符串赋值到字符数组中，使用strcat（）将字符串附加到数组末尾。
```cpp
#include <iostream>
#include <string>
#include <cstring>//提供stringcopy
#pragma warning (disable:4996) 
int main()
{
	using namespace std;
	char charr1[20];
	char charr2[20]="apple";
	string str1;
	string str2="panther";
	str1=str2;
	strcpy (charr1,charr2);
	//cout << str1<<" "<<charr1<<endl;
	str1 += " paste";
	strcat(charr1 ," juice");
	//cout<<str1 <<" "<<charr1<<endl;
	//strcat(charr1, charr2);
	//cout << charr1 << endl;
	int len1 = str1.size();   //成员方法string
	int len2 = strlen(charr1);//strlen()计算有效长度
	cout<< "the string "<<str1<<" contains "<<len1<<" character\n";
	cout << "the string " << charr1 << " contains " << len2 << " character\n";
	cout <<charr1<<" " << sizeof(charr1)<<" character" << endl;
	return 0;
}
```
输出如下：
```text
the string panther paste contains 13 character
the string apple juice contains 11 character
apple juice 20 character
```
> string 赋值较为简单相对于字符串用库里的函数赋值来说。
> string只需简单的相加，但是字符串却需要strcpy（）和strcat（）。
> string类有自动调整大小的功能不会有覆盖相邻的内存的风险。
### 4.3.4 string类I/O
>可以使用cin将输入储存到string对象中，使用cout来显示string对象，句法和c风格字符串相同，但是每次读取一行而不是一个单词，使用的句法不同，
```cpp
#include <iostream>//4.10
#include <string>
#include <cstring>
int main()
{
	using namespace std;
	char charr[20];
	string str;
	cout<< "lenght of string in charr in the befor input :"<< strlen(charr)<<endl;//strlen在数组里找\0，因为我们未赋值，它就一直找
	int len =str.size();
	cout << "lenght of string in charr in the befor input :" << len << endl;
	cout<<"enter a line of tsxt:\n";
	cin.getline(charr,20);
	cout<<"u entered:"<<charr<<endl;
	cout << "enter a line of tsxt:\n";
	getline(cin,str);//string捕获对象放到str用普通函数即可，不是类方法，而是将cin作为参数
	cout << "u entered:" << str << endl;
	cout << "lenght of string in charr in the befor input :" << strlen(charr) << endl;
	cout << "lenght of string in charr in the befor input :" << str.size() << endl;
	return 0;
}
```
```text
lenght of string in charr in the befor input :54
lenght of string in charr in the befor input :0
enter a line of tsxt:
bingdong
u entered:bingdong
enter a line of tsxt:
liu
u entered:liu
lenght of string in charr in the befor input :8
lenght of string in charr in the befor input :3
```
str的字符长度未0是因为未被初始化的string对象的长度被自动设置为0.
## 4.4 结构简介
结构可以包含多个数据类型，数组不可以。比如可以包含整型也可以包含浮点数。
通过成员名可以访问结构成员，比如 vicent.prenice
```cpp
#include<iostream>
struct jiajia
{
	char apple[20];
	float pea;
	int ding;
};
int main()
{
	using namespace std;
	jiajia guest =
	{
		"pingguo",
		1.88,
		29.99
	};
	jiajia pai =
	{
		"diergezifu",
		3.99,
		23.81
	};
	cout << "exspend the guest with:" << guest.apple << endl;
	cout << " and the pai"<<pai.apple<<endl;
		return 0;
}
```
```cpp
#include<iostream>
struct inflatable
{
char name[20],
int volume,
float prince
}
int main()
{
using namespace std;
inflatable guest[2]={{"apple",12.07,23.12},{"pea",26.01,12.22}};
cout << guest[0].name<<" "<<guest[1].name<<endl;
cout <<guest[0].volume+guest[1].volume;
return 0;}
```
## 4.5 共用体
