---
title: 第四章 复合类型
date: 2025-12-10 17:00:00
tags: [C++笔记]
categories: [C++笔记]
cover: 
description: 阿稳第十二期视频笔记，4.2结束
---
# C++ primer plus 笔记-第十二期


## 第四章 复合类型-字符串
## 4.2.3 字符串输入
```cpp
#include<iostream>
int main ()
{
using namespace std;
const int zong=20;
char name [zong];
char car [zong];
cout <<"enter ur name/n";
cin>>name;
cout <<”u have favorite car is？/n"
cin>>car;
cout<<"here are u  "<<car<<" is the best car!/n"
return 0;
}
```
>为什么输出的时候汽车的名字是名字的后半部分？因为dun gen中间的空格c++会识别为/0，默认停止，也就是dun/0，gen/0，这样gen就成了汽车名字。

## 4.2.4每次读取一行字符串输入
>istream 中的类（如cin）提供了一些面对行的类成员函数，：getline（）和get（），这两个函数都读取至换行符，getline（）将丢弃换行符，get（）的换行符保留在输入序列中。
### getline（）
>该函数有两个参数，一个是数组的名称，一个是读取的字符数，如果20个字符数则读取19个。
```cpp
cin.getline (name,20);
```
当从缓存区读够19个字符数或者遇到换行符停止读取。

```cpp
#include<iostream>
int main ()
{
using namespace std;
const int zong=20;
char name [zong];
char car [zong];
cout <<"enter ur name/n";
cin.getline(name,zong);
cout <<”u have favorite car is？/n"
cin.getline(car,zong);
cout<<"here are u  "<<car<<"  is the best car!/n"
return 0;
}
```
### get.()
> 区别getline（）遇到回车换行丢弃，但是get（）会留在缓存区。
```cpp
#include<iostream>
int main ()
{
using namespace std;
const int zong=20;
char name [zong];
char car [zong];
cout <<"enter ur name/n";
cin.get(name,zong);
cout <<”u have favorite car is？/n"
cin.get(car,zong);
cout<<"here are u  "<<car<<"  is the best car!/n"
return 0;
}
```
此时car会不让输入，因为第二个get（）读取时会读到缓存区里的换行符，捕获工具此时就关闭了，即为失效位。
解决方案：另一种变体，不带任何参数的cin.get()，这样就可以读取下一个字符。
```cpp
cout <<"enter ur name/n";
cin.get(name,zong);
cin.get()
```
cin.get（name,20）后补一条空白的即可。
另一种使用get（）的方式是将两个类成员函数拼接起来，如下：
```cpp
cin.get(name,zong);
cin.get();
cin.get(car,zong);
```
```cpp
cin.get(name,zong).get();
```
getline.()这个也可以这样写：
```cpp
cin.getline(name1,zong).getline(name2,zong);
```
将前后两部分拼接起来。

*了解以下*
---
**空行和其他问题**：刚getline或get读取空行时，最初是接下来输入一行get（）或者getline（），结束读取位置继续读取，当下当get（）（非getline）读取空行后将设置失效位，这意味着输入将被阻断，但可以用下面的命恢复：
```cpp
cin.clear();
```
## 4.2.5 混合输入字符串和数字

```cpp
#include<iostream>
int main()
{
	using namespace std;
	int year;
	cout << "你房子哪一年建成？"<<endl;
	cin>>year;
	char address[80];
	cout << "你家住哪？"<<endl;
	cin.getline(address,80);
	cout << "您房子建成在 " << year << "年" << endl;
	cout << "坐落在" << address << endl;
	return 0;
}
```
运行代码后可以看到我们没有机会输入地址，问题在于当cin读取年份时将换行产生的换行符留在了队列，后面的cin.getline()将其认为是一个空行，并将这个空字符赋给了address，解决方法是在cin.getline()之前使用cin.get()，把这个空字符先读取了。
```
cin>>year;
cin.get();
char address[80];
cout << "你家住哪？"<<endl;
cin.getline(address,80);
```
另一个方案是
```
(cin>>year).get();
```
上面两个方案解决思路是一致的。